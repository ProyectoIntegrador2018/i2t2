<%= form_with(model: center, local: true) do |form| %>
  <% if center.errors.any? %>
    <div class="alert alert-danger" role="alert">Hay campos faltantes</div>
  <% end %>
  <div id="basic info">
    <h2> Información básica </h2>
    <div class="input-group field">
      <%= form.text_field :full_name, class:"form-control  #{center.errors.include?(:full_name) ? 'is-invalid' : 'is-valid' if center.errors.any?}", placeholder:"Nombre completo" %>
    </div>
    <br>

    <div class="input-group field">
      <%= form.text_field :short_name, class:"form-control  #{center.errors.include?(:short_name) ? 'is-invalid' : 'is-valid' if center.errors.any?}", placeholder:"Siglas"%>
    </div>
    <br>

    <div class="input-group">
      <div class="input-group-prepend">
        <span class="input-group-text" id="">https://</span>
      </div>
      <%= form.text_field :website, class:"form-control  #{center.errors.include?(:website) ? 'is-invalid' : 'is-valid' if center.errors.any?}", placeholder:"Sitio web", 'aria-describedby'=>"basic-addon1"  %>
    </div>
    <br>

    <div class="input-group field">
      <%= form.text_field :address, class:"form-control  #{center.errors.include?(:address) ? 'is-invalid' : 'is-valid' if center.errors.any?}", placeholder:"Dirección"  %>
    </div>
    <br>

    <div class="field">
      <%= form.label "Inicio de operaciones" %>
      <%= form.date_select :start_date %>
    </div>
    <br>

    <div class="input-group field">
      <%= form.text_field :director_name, class:"form-control  #{center.errors.include?(:director_name) ? 'is-invalid' : 'is-valid' if center.errors.any?}", placeholder:"Nombre de director"  %>
    </div>
    <br>

    <div class="input-group field">
      <%= form.text_field :director_email, class:"form-control  #{center.errors.include?(:director_email) ? 'is-invalid' : 'is-valid' if center.errors.any?}", placeholder:"Email del director"  %>
    </div>
    <br>

    <div class="input-group field">
      <%= form.text_field :director_phone, class:"form-control  #{center.errors.include?(:director_phone) ? 'is-invalid' : 'is-valid' if center.errors.any?}", placeholder:"Teléfono del director"  %>
    </div>
    <br>

</div>
<div id="clusters">
  <h2> Clusters </h2>
  <div class="form-check">
  <%= collection_check_boxes(:center, :cluster_ids, Cluster.all.sort_by{ |x| x.name }, :id, :name) do |cluster| %>
    <label class="checkbox-inline">
    <%= cluster.check_box %>
    <%= cluster.label %>
  </label>
  <% end %>
  </div>
</div>

<div id="industries">
  <h2> Industrias </h2>
  <div class="form-check">
    <%= collection_check_boxes(:center, :industry_ids, Industry.all.sort_by{|x| x.name}, :id, :name) do |industry| %>
      <label class="checkbox-inline">
        <%= industry.label %>
        <%= industry.check_box%>
      </label>
    <% end %>
  </div>
</div>

<h2> Servicios de IDTi</h2>
<table class="table">
  <tr>
    <th> Nombre </th>
    <th> Industria </th>
  </tr>
  <tbody class="idti_services">
    <%= form.fields_for :idti_services do |idti_service_form| %>
      <%= render 'idti_service_fields', f: idti_service_form %>
    <% end %>
  </tbody>
</table>
<%= link_to_add_association "Agregar servicio", form, :idti_services, data:
  {"association-insertion-node" => "tbody.idti_services",
"association-insertion-method" => "append"} %>
<br><br>

<h2> Areas de IDTi</h2>
<table class="table">
  <tr>
    <th> Nombre </th>
  </tr>
  <tbody class="idti_areas">
    <%= form.fields_for :idti_areas do |idti_area_form| %>
      <%= render 'idti_area_fields', f: idti_area_form %>
    <% end %>
  </tbody>
</table>
<%= link_to_add_association "Agregar area", form, :idti_areas, data:
  {"association-insertion-node" => "tbody.idti_areas",
"association-insertion-method" => "append"} %>
<br><br>
<div id="funding">
  <h2> Infraestructura </h2>
  <h3> Propiedad </h3>

  <div class="input-group field">
    <%= form.number_field :building_area, class:"form-control  #{center.errors.include?(:building_area) ? 'is-invalid' : 'is-valid' if center.errors.any? if center.errors.any?}", placeholder:"Area de construcción"  %>
    <div class="input-group-append">
      <span class="input-group-text" id="">m2</span>
    </div>
  </div>
  <br>

  <div class="input-group field">
    <%= form.number_field :property_area, class:"form-control  #{center.errors.include?(:property_area) ? 'is-invalid' : 'is-valid' if center.errors.any?}", placeholder:"Area de propiedad"  %>
    <div class="input-group-append">
      <span class="input-group-text" id="">m2</span>
    </div>
  </div>
  <br>

  <div class="input-group field">
    <div class="input-group-prepend">
      <span class="input-group-text" id="">$</span>
    </div>
    <%= form.number_field :property_private_funding, class:"form-control  #{center.errors.include?(:property_private_funding) ? 'is-invalid' : 'is-valid' if center.errors.any?}", placeholder:"Inversion privada"  %>
  </div>
  <br>

  <div class="input-group field">
    <div class="input-group-prepend">
      <span class="input-group-text" id="">$</span>
    </div>
    <%= form.number_field :property_federal_funding, class:"form-control  #{center.errors.include?(:property_federal_funding) ? 'is-invalid' : 'is-valid' if center.errors.any?}", placeholder:"Inversion federal"  %>
  </div>
  <br>

  <div class="input-group field">
    <div class="input-group-prepend">
      <span class="input-group-text" id="">$</span>
    </div>
    <%= form.number_field :property_state_funding, class:"form-control  #{center.errors.include?(:property_state_funding) ? 'is-invalid' : 'is-valid' if center.errors.any?}", placeholder:"Inversion estatal"  %>
  </div>
  <br>

  <div class="input-group field">
    <div class="input-group-prepend">
      <span class="input-group-text" id="">$</span>
    </div>
    <%= form.number_field :property_other_funding, class:"form-control", placeholder:"Otra inversion" %>
  </div>
  <br>

  <div class="input-group field">
    <%= form.text_field :property_other_source, class:"form-control", placeholder:"Fuente de otra inversion" %>
  </div>
  <br>

  <h3> Equipamiento </h3>

  <div class="input-group field">
    <div class="input-group-prepend">
      <span class="input-group-text" id="">$</span>
    </div>
    <%= form.number_field :equipment_private_funding, class:"form-control  #{center.errors.include?(:equipment_private_funding) ? 'is-invalid' : 'is-valid' if center.errors.any?}", placeholder:"Inversion privada"  %>
  </div>
  <br>

  <div class="input-group field">
    <div class="input-group-prepend">
      <span class="input-group-text" id="">$</span>
    </div>
    <%= form.number_field :equipment_federal_funding, class:"form-control  #{center.errors.include?(:equipment_federal_funding) ? 'is-invalid' : 'is-valid' if center.errors.any?}", placeholder:"Inversion federal"  %>
  </div>
  <br>

  <div class="input-group field">
    <div class="input-group-prepend">
      <span class="input-group-text" id="">$</span>
    </div>
    <%= form.number_field :equipment_state_funding, class:"form-control  #{center.errors.include?(:equipment_state_funding) ? 'is-invalid' : 'is-valid' if center.errors.any?}", placeholder:"Inversion estatal"  %>
  </div>
  <br>

  <div class="input-group field">
    <div class="input-group-prepend">
      <span class="input-group-text" id="">$</span>
    </div>
    <%= form.number_field :equipment_other_funding, class:"form-control", placeholder:"Otra inversion" %>
  </div>
  <br>

  <div class="input-group field">
    <%= form.text_field :property_other_source, class:"form-control", placeholder:"Fuente de otra inversion" %>
  </div>
  <br>
</div>

<h5> Los siguientes campos son opcionales </h5>
<div id="patents">
  <h2> Patentes y Diseños </h2>

  <div class="form-row ">
      <label class="form-label col-sm-2 col-form-label"> Patentes en México </label>
    <div class="col-auto">
      <div class="input-group field col-auto">
        <%= form.number_field :requested_patents_mexico, class:"form-control", placeholder:"Solicitadas" %>
      </div>
    </div>
    <div class="col-auto">
      <div class="input-group field col-auto">
        <%= form.number_field :given_patents_mexico, class:"form-control", placeholder:"Obtenidas" %>
      </div>
    </div>
  </div>
  <br>

  <div class="form-row ">
      <label class="form-label col-sm-2 col-form-label"> Patentes en EUA, Europa o Asia </label>
    <div class="col-auto">
      <div class="input-group field col-auto">
        <%= form.number_field :requested_patents_us_eu_as, class:"form-control", placeholder:"Solicitadas" %>
      </div>
    </div>
    <div class="col-auto">
      <div class="input-group field col-auto">
        <%= form.number_field :given_patents_us_eu_as, class:"form-control", placeholder:"Obtenidas" %>
      </div>
    </div>
  </div>
  <br>

  <div class="form-row ">
      <label class="form-label col-sm-2 col-form-label">Diseños en México</label>
    <div class="col-auto">
      <div class="input-group field col-auto">
        <%= form.number_field :requested_designs_mexico, class:"form-control", placeholder:"Solicitadas" %>
      </div>
    </div>
    <div class="col-auto">
      <div class="input-group field col-auto">
        <%= form.number_field :given_designs_mexico, class:"form-control", placeholder:"Obtenidas" %>
      </div>
    </div>
  </div>
  <br>

  <div class="input-group field">
    <%= form.number_field :trademarks, class:"form-control", placeholder:"Marcas registradas" %>
  </div>
  <br>

  <div class="input-group field">
    <%= form.number_field :copyrights, class:"form-control", placeholder:"Derechos de autor" %>
  </div>
  <br>

  <div class="input-group field">
    <%= form.number_field :isi_publications, class:"form-control", placeholder:"Publicaciones en el Institute for Scientific Information" %>
  </div>
  <br>

  <div class="input-group field">
    <%= form.number_field :arbitrated_publications, class:"form-control", placeholder:"Artículos publicados en revistas arbitradas" %>
  </div>
  <br>

  <div class="input-group field">
    <%= form.number_field :non_arbitrated_publications, class:"form-control", placeholder:"Artículos publicados en revistas no arbitradas" %>
  </div>
  <br>

  <div class="input-group field">
    <%= form.number_field :quotes_in_publications, class:"form-control", placeholder:"Citas de artículos" %>
  </div>
  <br>

<h2> Equipamiento </h2>
<table class="table">
  <tr>
    <th>Nombre</th>
    <th>Disponible</th>
  </tr>
  <tbody class="equipment_fields">
    <%= form.fields_for :equipments do |equipment_form| %>
      <%= render 'equipment_fields', f: equipment_form %>
    <% end %>
  </tbody>
</table>
<%= link_to_add_association "Agregar equipo", form, :equipments, data:
  {"association-insertion-node" => "tbody.equipment_fields",
"association-insertion-method" => "append"} %>
<br><br>

<h2> Premios y reconocimientos </h2>
<table class="table">
  <tr>
    <th>Nombre</th>
    <th>Fecha</th>
  </tr>
  <tbody class="awards_fields">
    <%= form.fields_for :awards do |award_form| %>
      <%= render 'award_fields', f: award_form %>
    <% end %>
  </tbody>
</table>
<%= link_to_add_association "Agregar premio", form, :awards, data:
  {"association-insertion-node" => "tbody.awards_fields",
"association-insertion-method" => "append"} %>
<br><br>

<h2> Oficina de transferencia de tecnología </h2>
<div class="input-group field">
  <%= form.number_field :transfer_office_contact_name, class:"form-control", placeholder:"Nombre de contacto" %>
</div>
<br>

<div class="input-group field">
  <%= form.number_field :transfer_office_contact, class:"form-control", placeholder:"Email de contacto" %>
</div>
<br>

<div class="actions">
  <%= form.submit class:"btn btn-primary", value:"Guardar centro", 'data-disable-with'=>"Guardar centro" %>
</div>
<% end %>
